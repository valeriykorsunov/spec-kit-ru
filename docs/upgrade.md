# Руководство по обновлению

> У вас установлен Spec Kit, и вы хотите обновиться до последней версии, чтобы получить новые функции, исправления ошибок или обновленные слэш-команды. Это руководство охватывает как обновление инструмента CLI, так и обновление файлов вашего проекта.

---

## Краткая справка

| Что обновлять | Команда | Когда использовать |
|----------------|---------|-------------|
| **Только CLI-инструмент** | `uv tool install specify-cli --force --from git+https://github.com/valeriykorsunov/spec-kit-ru.git` | Получить последние функции CLI, не затрагивая файлы проекта |
| **Файлы проекта** | `specify init --here --force --ai <ваш-агент>` | Обновить слэш-команды, шаблоны и скрипты в вашем проекте |
| **И то, и другое** | Сначала обновите CLI, затем проект | Рекомендуется для мажорных обновлений версий |

---

## Часть 1: Обновление CLI-инструмента

CLI-инструмент (`specify`) отделен от файлов вашего проекта. Обновите его, чтобы получить последние функции и исправления ошибок.

### Если вы устанавливали через `uv tool install`

```bash
uv tool install specify-cli --force --from git+https://github.com/valeriykorsunov/spec-kit-ru.git
```

### Если вы используете одноразовые команды `uvx`

Обновление не требуется — `uvx` всегда загружает последнюю версию. Просто запускайте команды как обычно:

```bash
uvx --from git+https://github.com/valeriykorsunov/spec-kit-ru.git specify init --here --ai copilot
```

### Проверка обновления

```bash
specify check
```

Эта команда покажет установленные инструменты и подтвердит, что CLI работает.

---

## Часть 2: Обновление файлов проекта

Когда Spec Kit выпускает новые функции (например, новые слэш-команды или обновленные шаблоны), вам нужно обновить файлы Spec Kit в вашем проекте.

### Что обновляется?

Запуск `specify init --here --force` обновит:

- ✅ **Файлы слэш-команд** (`.claude/commands/`, `.github/prompts/` и т.д.)
- ✅ **Файлы скриптов** (`.specify/scripts/`)
- ✅ **Файлы шаблонов** (`.specify/templates/`)
- ✅ **Файлы общей памяти** (`.specify/memory/`) - **⚠️ См. предупреждения ниже**

### Что остается в безопасности?

Эти файлы **никогда не затрагиваются** при обновлении — пакеты шаблонов их даже не содержат:

- ✅ **Ваши спецификации** (`specs/001-my-feature/spec.md` и т.д.) - **ПОДТВЕРЖДЕНО БЕЗОПАСНО**
- ✅ **Ваши планы реализации** (`specs/001-my-feature/plan.md`, `tasks.md` и т.д.) - **ПОДТВЕРЖДЕНО БЕЗОПАСНО**
- ✅ **Ваш исходный код** - **ПОДТВЕРЖДЕНО БЕЗОПАСНО**
- ✅ **Ваша история git** - **ПОДТВЕРЖДЕНО БЕЗОПАСНО**

Директория `specs/` полностью исключена из пакетов шаблонов и никогда не будет изменена во время обновлений.

### Команда обновления

Запустите это внутри директории вашего проекта:

```bash
specify init --here --force --ai <ваш-агент>
```

Замените `<ваш-агент>` на вашего ИИ-ассистента. Обратитесь к списку [Поддерживаемых ИИ-агентов](../README.md#-supported-ai-agents)

**Пример:**

```bash
specify init --here --force --ai copilot
```

### Понимание флага `--force`

Без `--force` CLI предупредит вас и попросит подтверждения:

```text
Warning: Current directory is not empty (25 items)
Template files will be merged with existing content and may overwrite existing files
Proceed? [y/N]
```

С флагом `--force` он пропускает подтверждение и немедленно приступает к выполнению.

**Важно: Ваша директория `specs/` всегда в безопасности.** Флаг `--force` влияет только на файлы шаблонов (команды, скрипты, шаблоны, память). Ваши спецификации функций, планы и задачи в `specs/` никогда не включаются в пакеты обновлений и не могут быть перезаписаны.

---
